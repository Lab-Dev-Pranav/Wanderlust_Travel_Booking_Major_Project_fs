<% layout("/layouts/boilerplate") %>

<div class="container my-5">

        <h1 class="mb-4">Payment Section</h1>
          <!-- User Contact (Less Important) -->
 

  <!-- Booking & Listing Summary -->
  <div class="shadow-sm p-4 rounded-4 mb-4 bg-white border">
    <h4 class="mb-3 text-primary">Booking and Listing Details</h4>
    <div class="row">
      <div class="col-md-6">
        <p><strong>Booking ID:</strong> <%= booking._id %></p>
        <p><strong>Check-In:</strong> <%= new Date(booking.checkIn).toLocaleDateString("en-IN") %></p>
        <p><strong>Check-Out:</strong> <%= new Date(booking.checkOut).toLocaleDateString("en-IN") %></p>
        <p><strong>Total Days:</strong> 
          <%= Math.ceil((new Date(booking.checkOut) - new Date(booking.checkIn)) / (1000 * 60 * 60 * 24)) %>
        </p>
        <p><strong>Guests:</strong> <%= booking.people %></p>
      </div>
      <div class="col-md-6">
        <p><strong>Listing Title:</strong> <%= listing.title %></p>
        <p><strong>Location:</strong> <%= listing.location %></p>
        <p><strong>Country:</strong> <%= listing.country %></p>
        <p><strong>Price per Night:</strong> ₹<%= listing.price.toLocaleString("en-IN") %></p>
      </div>
    </div>
     <div class="shadow-sm p-3 rounded-4 mb-4 bg-white border border-dashed text-muted small">
    <h6 class="mb-2 text-secondary">Property Owner (Internal Use)</h6>
    <p><strong>Email:</strong> <%= user.email %></p>
  </div>
  </div>

  <!-- Payment Summary -->
  <div class="shadow-sm p-4 rounded-4 mb-4 bg-light border">
    <h4 class="mb-3 text-success">Payment Summary</h4>
    <p><strong>Base Amount:</strong> ₹<%= baseAmount.toLocaleString("en-IN") %></p>
    <p><strong>GST (18%):</strong> ₹<%= gstAmount.toLocaleString("en-IN") %></p>
    <p><strong>Platform Fee (2%):</strong> ₹<%= platformFee.toLocaleString("en-IN") %></p>
    <hr />
    <p class="fs-5"><strong>Total Payable:</strong> ₹<strong><%= grandTotal.toLocaleString("en-IN") %></strong></p>
  </div>


  <!-- Confirm Payment -->
   <!-- /payments/:id/confirm -->
  <form action="/payments/<%= booking._id %>/confirm" method="POST">
    <button type="submit" class="btn btn-success btn-lg w-100 shadow-sm">Confirm Payment</button>
  </form>
</div>
